@model _24DH11420_LTTH_BE234.Models.ViewModel.Cart
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
}
<style>
    
    .shoppingcart {
        background-color: ghostwhite;
    }

    .cart-section {
        background-color: white;
        border: 1px groove #ffffff;
        border-radius: 10px;
        padding: 10px 5px;
        margin: 10px;
    }

    .cart-button {
        width: 250px;
        border: 1px solid #808080;
        margin: 5px;
    }

    .shoppingcart tr {
        font-size: smaller;
    }

    .quantity-input {
        width: 60px;
        text-align: right;
    }

    .action-icon {
        max-height: 20px;
        cursor: pointer;
    }
</style>

<h2>GIỎ HÀNG</h2>

<div class="row shoppingcart">
    @if (Model.Items.Any())
    {
        <div class="col-md-8 cart-section">
            <table class="table">
                <thead>
                    <tr>
                        <th colspan="2">Sản phẩm</th>
                        <th>Đơn giá</th>
                        <th>Số lượng</th>
                        <th>Thành tiền</th>
                        <th>
                            <a href="@Url.Action("ClearCart", "Cart")" title="Xóa tất cả mặt hàng trong giỏ">
                                <img src="~/images/remove.png" style="max-height:20px;" />
                            </a>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Items)
                    {
                        <tr>
                            <td>
                                <img src="@Url.Content(item.ProductImage)" alt="@item.ProductName" style="max-height:80px;" />
                            </td>
                            <td>@item.ProductName</td>
                            <td>@string.Format("{0:N0}", item.UnitPrice) ₫</td>
                            <td>
                                @using (Html.BeginForm("UpdateQuantity", "Cart", FormMethod.Post, new { @class = "form-inline" }))
                                {
                                    @Html.Hidden("id", item.ProductID)
                                    <input type="number" name="quantity" class="form-control quantity-input" value="@item.Quantity" min="1" max="100" />
                                    <input type="submit" value="Cập nhật" class="btn btn-sm btn-link" />
                                }
                            </td>
                            <td>@string.Format("{0:N0}", item.TotalPrice) ₫</td>
                            <td>
                                <a href="@Url.Action("RemoveFromCart", "Cart", new { id = item.ProductID })">
                                    <img src="~/images/remove.png" class="action-icon" />
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <div class="col-md-3 cart-section">
            <h4>Tổng cộng</h4>
            <hr />
            <h5>
                Tổng giá trị:
                <span style="color: red; font-weight: bold;">
                    @string.Format("{0:N0}", Model.TotalValue()) ₫
                </span>
            </h5>
            <br />
            @Html.ActionLink("Mua hàng", "Checkout", "Order", null, new { @class = "btn btn-danger cart-button" })
        </div>
    }
    else
    {
        <p>Bạn chưa có sản phẩm nào trong giỏ.</p>
    }

    <div class="col-md-12">
        @Html.ActionLink("Tiếp tục mua hàng", "Index", "Home", null, new { @class = "btn btn-warning cart-button" })
    </div>
</div>